<ion-header>
  <ion-toolbar>
    <ion-title><b>Заказы</b></ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
    <ion-item>
      <ion-label>Статус</ion-label>
      <ion-select interface="action-sheet" (ionChange)="setStatus($event.detail.value)">
        <!-- <ion-select-option [value]="null" selected>Все</ion-select-option> -->
        <ion-select-option *ngFor="let item of statuses; let i = index;" [value]="item.status" [selected]="item.status == relatedStatus">{{ statusForCourier(item.status) }}</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-card class="welcome-card" 
              *ngFor="let order of orders; let i = index;" 
              [routerLink]="'order/' + order.id" 
              routerDirection="root">
      <ion-card-header>
        <ion-card-subtitle>{{ toDate(order.createdAt) }}</ion-card-subtitle>
        <ion-card-title class="title">{{ order.recipient.name }}</ion-card-title>
        <ion-card-title>{{ order.recipient.phone }}</ion-card-title>
        <p>Кол-во попыток доставки: {{ order.deliveryAttemptsCount }} / {{ order.deliveryAttemptsLimit }}</p>
      </ion-card-header>
    </ion-card>

    <div *ngIf="relatedStatus == 'COURIER_ASSIGNED' && orders.length == 0" class="no-orders">
      <ion-icon name="sad" class="no-orders-icon"></ion-icon>
      <p class="no-orders-text">Заказы еще не назначены</p>
    </div>

    <div *ngIf="relatedStatus == 'DELIVERED' && orders.length == 0" class="no-orders">
      <ion-icon name="sad" class="no-orders-icon"></ion-icon>
      <p class="no-orders-text">Доставленных заказов нет</p>
    </div>

    <div *ngIf="relatedStatus == 'NOT_DELIVERED' && orders.length == 0" class="no-orders">
      <ion-icon name="happy" class="no-orders-icon"></ion-icon>
      <p class="no-orders-text">Отмененных заказов нет</p>
    </div>
</ion-content>
